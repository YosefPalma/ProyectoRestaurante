<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RenderBay</title>
    <link rel="stylesheet" href="CSS\custom.css">   
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    <!-- JQuery -->
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.7.0.js"></script> 

</head>
<body>
    <nav class="navbar navbar-expand-sm navbar-dark shadow-lg navbar p-3" style="background-color: #563d7c">
        <a class="navbar-brand" href="#">RenderBay</a>
        <button class="navbar-toggler d-lg-none" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleNavId" aria-controls="collapsibleNavId"
            aria-expanded="false" aria-label="Toggle navigation"></button>
        <div class="collapse navbar-collapse" id="collapsibleNavId">
            <ul class="navbar-nav me-auto mt-2 mt-lg-0">
                <li class="nav-item">
                    <a class="nav-link active" href="#" aria-current="page">Inicio<span class="visually-hidden">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Explorar</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="dropdownId" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Dropdown</a>
                    <div class="dropdown-menu" aria-labelledby="dropdownId">
                        <a class="dropdown-item" href="#">Action 1</a>
                        <a class="dropdown-item" href="#">Action 2</a>
                    </div>
                </li>
            </ul>
            <form class="d-flex my-2 my-lg-0">
                <input class="form-control me-sm-2" type="text" placeholder="...">
                <button class="btn btn-outline-success bg-danger my-2 my-sm-0 text-black" type="submit">Buscar</button>
            </form>
        </div>
    </nav>


    <div class="container-sm border border-dark rounded text-center text-white mt-3 p-3 cristalmorado">
        <h3>!Bienvenido a RenderBay!</h3>
        <small >Imprimiendo comunidades</small>

        <div id="carrusel" class="carousel slide" data-bs-ride="carousel">
            <ol class="carousel-indicators">
                <li data-bs-target="#carrusel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="First slide"></li>
                <li data-bs-target="#carrusel" data-bs-slide-to="1" aria-label="Second slide"></li>
                <li data-bs-target="#carrusel" data-bs-slide-to="2" aria-label="Third slide"></li>
            </ol>
            <div class="carousel-inner" id="innerimg" role="listbox">
                <div class="carousel-item active square">
                    <img src="./img/robot.png" class="w-100 d-block" alt="First slide">
                </div>
                <div class="carousel-item square">
                    <img src="./img/robot.png" class="w-100 d-block" alt="Second slide">
                </div>
                <div class="carousel-item square">
                    <img src="./img/robot.png" class="w-100 d-block" alt="Third slide">
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carrusel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carrusel" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </div>
</body>

<script defer>
    var testvar = "";
    var API_KEY = '30373580-7c0a0ee88c44cbcbc4936bf81';
    var URL = "https://pixabay.com/api/?key="+API_KEY+"&q="+encodeURIComponent('3D Printed toys');
    
    $(document).ready(usoApi());

    function usoApi(){
        $.getJSON(URL, function(data){
            if (parseInt(data.totalHits) > 0){
                // $.each(data.hits, function(i, hit){ console.log(hit.pageURL); });
                testvar = data.hits;
                ChangePictures(data);
            }
            else
                console.log('No hits');
        }   );
    };

    function ChangePictures(a){
        elcarrusel = Array.from(document.getElementById("innerimg").querySelectorAll("img"));
        console.log(elcarrusel);
        console.log(elcarrusel.length);
        for(let index = 0; index < elcarrusel.length; index++) {
            const element = elcarrusel[index];
            element.src = testvar[index].webformatURL;
            
        }
    }

</script>
</html>